# 02장. URL과 리소스



## 2.1 인터넷의 리소스  탐색하기

- URN은 현재 그 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별한다.
- URL은 리소스가 어디 있는지 설명해서 리소스를 식별한다.

실제 HTTP 어플리케이션에서는 URL을 URI의 한 부분으로 취급한다.



```
http://www.joes-hardware.com/seasonal/index-fall.html
<스킴>       <서버의 위치>            <리소스 경로>
```



## 2.2 URL 문법

- 모든 리소시는 다른 스킴(HTTP, FTP, SMTP)를 통해 접근할 수 있으며, URL 문법은 스킴에 따라 달라진다.

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```



#### 2.2.1 스킴: 사용할 프로토콜

- 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보이다,
- 스킴 컴포넌트는 알파벳으로 시작해야 하고, URL의 나머지 부분들과 첫 번째 `':'` 문자로 구분한다.
- 대소문자를 구분하지 않는다.



#### 2.2.2 호스트와 포트

- URL의 호스트와 포트 컴포넌트는 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지에 대한 정보를 제공한다.



#### 2.2.3 사용자 이름과 비밀번호

```
ftp://ftp.prep.ai.mit.edu/pub/gnu -- 사용자 이름과 비밀번호가 삽입되어 있지 않은 경우 기본 사용자이름과 비밀번호 셋팅
ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu -- '@' 문자로 사용자 이름과 비밀번호 컴포넌트를 분리
ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu
http://joe:joespasswd@www.joes-hardware.com/sales_info.txt
```



#### 2.2.4 경로

- URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다.

```
http://www.joes-hardware.com:80/seasonal/index-fall.html
```

- HTTP URL에서 경로 컴포넌트는 `'/'`문자를 기준으로 경로조각으로 나뉜다.



#### 2.2.5 파라미터

- URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다.
- 프로토콜 파라미터가 없으면, 다른 한편에 있는 서버는 그 요청을 잘못 처리하거나 처리하지 않을수도 있다.
- URL의 파라미터 컴포넌트는 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.
- 이름/값 쌍의 리스트로 `';'`문자로 구분하여 URL에 기술한다.

```
ftp://prep.ai.mit.edu/pub/gnu;type=d
```



#### 2.2.6 질의 문자열

- 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질의문이나 질의를 받을 수 있다.

```
http://www.joes-hardware.com/inventory-check.cgi?item=12731
```

--> 아이템 번호 12731의 재고가 있는지 확인하기 위해서 웹 데이터베이스 게이트웨이에 질의하는데 사용한다.



#### 2.2.7 프래그먼트

- 리소스의 특정 부분을 가리킬 수 있도록, URI은 리소스 내의 조각을 가리킬 수 있는 프래그먼트 컴포넌트를 제공한다.

```
http://www.joes-hardware.com/tools.html#drills
```

--> drills라는 프래그먼트는 tools.html 웹 페이지의 일부를 가리킨다.

- HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에 클라이언트는 서버에 프래그먼트를 전달하지 않는다.



## 2.3 단축 URL



#### 2.3.1 상대 URL

- URL은 상대 URL와 절대 URL 두 가지로 나뉜다.
  - 절대 URL은 리소스에 접근하는데 필요한 모든 정보를 가지고 있다.
  - 상대 URL은 모든 정보를 담고 있지는 않다.

- 상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는, 기저(base)라고 하는 다른 URL을 사용해야 한다.

![STUN](./assets/기저URL.png)



#### 2.3.2 URL 확장

- 호스트명 확장
  - EX) 주소 입력란에 'yahoo'를 입력하면, 브라우저는 호스트 명에 자동으로 'www'와 'com'를 붙여서 'www.yahoo.com'을 만든다.
  - 이런 간단한 기능을 제공하여 사용자의 시간을 절약하고 혼란을 막아준다.
  - 호스트명의 확장 기능은 프락시와 같은 다른 HTTP 애플리케이션에 문제를 발생시킬 수도 있다.
- 히스토리 확장
  - 사용자가 URL을 입력하는 시간을 줄이고자, 과거에 사용자가 방문했던 URL의 기록을 저장해 놓는 것이다.
  - 프락시를 사용할 경우 URL 자동확장 기능은 다르게 동작할 수 있다.



## 2.4 안전하지 않은 문자

- 안전한 전송이란, 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다.
- 문자가 제거되는 일을 피하고자 URL은 상대적으로 작고 일반적으로 안전한 알파벳 문자만 포함되도록 허락한다.



#### 2.4.1 URL 문자 집합

- US-ASCII는 문자를 서식화하가 하드웨어상에서 신호를 주고받기 위해, 7비트를 사용하여 영문 자판에 있는 키 대부분과 몇몇 출력되지 않는 제어 문자를 표현한다.
- URL이 특정 이진 데이터를 포함해야하는 경우를 지원하기 위해서, URL 설계자들은 URL에 이스케이프 문자열을 쓸 수 있게 설계하였다. 특성 문자나 데이터를 인코딩할 수 있게 함으로써 이동성과 완성도를 높였다.



#### 2.4.2 인코딩 세계

- URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안되었다.
- 인코딩은 안전하지 않은 문자를 `'%'`로 시작해, ASCII코드로 표현되는 두개의 16진수 숫자로 이루어진 `이스케이프` 문자로 바꾼다.



## 2.5 스킴의 바다

- http

  - 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜 스킴이다.
  - 포트값이 생략되어 있으면 기본값은 80이다

  ```
  http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
  ```

  

- https

  - http 스킴과 거의 같다.
  - 다른 점은 https는 HTTP의 커넥션의 양 끝단에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(SSL)을 사용한다는 것이다.
  - 기본 포트값은 443이다.

  ```
  https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
  ```

  

- mailto

  - mailto URL은 이메일 주소를 가리킨다.
  - 이메일은 다른 스킴과는 다르게 동작하기 때문에, mailto URL은 표준 URL과는 다른 포맷을 가진다.

  ```
  mailto:joe@joes-hardware.com
  ```

  

- ftp

  - 파일 전송 프로토콜 URL은 FTP 서버에 있는 파일을 내려 받거나 올리고, FTP 서버의 디렉터리에 있는 콘텐츠 목록을 가져오는 데 사용할 수 있다.

  ```
  ftp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>
  ```

  

- telnet

  - 대화명 서비스에 접근하는데 사용한다.

  ```
  telnet://<사용자 이름>:<비밀번호>@<호스트>:<포트>/
  ```

  

## 2.6 미래

- URL은 인터넷 프로토콜 간에 공유할 수 있는 일관된 작명 규칙을 제공한다.
- URL은 주소이지 실제 이름은 아니기때문에, 리소스가 옮겨지면 URL을 더는 사용할 수 없는 단점이 존재한다. 이러한 문제를 예방할 수 있는 방법은, 객체의 위치와 상관없이 그 객체를 가리키는 실제 객체의 이름을 사용하는 것이다 -->  URN

- 지속 통합 자원 지시자(Persistent uniform resource locators, PURL)을 사용하면 URL로 URN의 기능을 제공할 수 있다. PRUL은 리소스의 실제 URL 목록을 관리하고 추적하는 리소스 위치 중개 서버를 두고, 해당 리소스를 우회적으로 제공한다.